# AGENTS.md - AIエージェントへの包括的指示

**Slack × A–D Knowledge Loop Tracker** における AIエージェントの行動規範

---

## 1. プロジェクト概要

このプロジェクトは、Slackの日次会話から「知識生産ループ（A→B→C→D）」を抽出し、チームの学習能力を可視化・加速するシステムである。

### 1.1 絶対原則（必ず守ること）

- **人を評価・点数化しない** — これはチーム改善のためのシステム
- **AI出力を「証拠」として扱わない** — AIの出力はEvidenceではない
- **精度より「ループが回ること」を優先** — 誤判定は許容

### 1.2 必読ファイル（この順で読むこと）

1. **SYSTEM_CONSTITUTION.md** — 憲法（不変の定義・絶対命令）
2. **PURPOSE.md** — 大目標・非目標・成功条件
3. **README.md** — プロジェクト概要・Quick Start

---

## 2. A–D 状態遷移モデル（変更禁止）

| 状態 | 名称 | 定義 |
|:---:|:---|:---|
| **A** | Unknown | 未知・不確実性・懸念・仮説が「新規に言語化された」状態 |
| **B** | Observation | 未知を潰すための観測（テスト/計測/確認）に変換された状態 |
| **C** | Verified | 観測により仮説が「潰れた/強まった/否定された」状態 |
| **D** | Reused | 次回も回る形になった状態（自動化・テンプレ化） |

---

## 3. AIエージェントの役割と境界

### 3.1 やること（✅）

| タスク | 説明 |
|:---|:---|
| A–Dイベントの**抽出** | Slackスレッドからイベントを識別 |
| 既存Topicへの**紐付け** | topic_idへのマッピング |
| confidence（自信度）の**付与** | 0.0〜1.0で自信度を示す |
| JSON形式での**構造化出力** | 機械可読な形式で出力 |

### 3.2 やらないこと（❌）

| 禁止事項 | 理由 |
|:---|:---|
| 人やチームへの**点数付け** | 評価目的ではない |
| 抽出結果の**良し悪し判定** | AIは採点官ではない |
| 「良い/悪い」の**断言** | 人間の判断を代替しない |
| 人間の判断の**代替** | 最終判断は人間が行う |

---

## 4. 抽出時の行動規範

### 4.1 入力

- 日次Slackスレッド全文
- 既存Topic台帳（topic_id, status, title）

### 4.2 処理フロー

```
1. 各メッセージを読み、A/B/C/D イベントを識別
2. 既存topic_idへの紐付けを優先（なければ新規作成）
3. 根拠となるmessage_urlを必ず付与
4. confidence（自信度）を算出
```

### 4.3 出力フォーマット

```json
{
  "events": [
    {
      "event_type": "A",
      "topic_id": "topic_001",
      "topic_title": "温度条件での割り込み遅延",
      "message_url": "https://slack.com/...",
      "author": "user_name",
      "confidence": 0.85,
      "note": "再現条件不明と明言"
    }
  ]
}
```

---

## 5. 日次追跡指標（Primary Metrics）

以下の指標のみを追跡する。これ以外を優先してはならない。

1. **新規A件数** — 未知が表に出ているか
2. **A→B件数** — 未知が観測に変換されているか
3. **滞留A年齢中央値** — 未知が腐っていないか

---

## 6. 開発タスク実行時のワークフロー

### 6.1 コンテキスト理解

1. SYSTEM_CONSTITUTION.md を読む（絶対ルール）
2. PURPOSE.md を読む（大目標・今期の優先順位）

### 6.2 実装時の注意

- Slackメッセージの**PII（個人情報）** をログに出さない
- Topic台帳との**整合性**を保つ
- **冪等性**を意識した設計

### 6.3 人間へのフィードバック

以下の場合は人間に報告すること：

- SYSTEM_CONSTITUTION.md に違反する変更を求められた場合
- PURPOSE.md の非目標に該当する機能を求められた場合
- 「人を点数化する」機能を求められた場合

---

## 7. 成功条件と失敗条件

### 7.1 成功している状態

- 未知（A）が日常的にSlackに出てくる
- A→B変換が滞りなく発生している
- 滞留Aの年齢中央値が低く保たれている
- チームが「書くこと」を負担に感じていない

### 7.2 失敗している状態

- 人事評価・査定に使われている
- AI抽出精度の議論がループ改善より優先されている
- タグ付けが義務化され、Slackが静かになった
- 個人の点数比較が始まった
